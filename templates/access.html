<div id="access" class="section-profile">
  <div class="row">
    <div class="topleft duk-icon"><img onclick="removeSection('access')" src="/gui/img/x.png"></div>
    <div id="access-sidebar" class="column section-border" style="flex:25%;">
      <img src="/access/img/access.png">
      <h4 style="margin-bottom:-5px">Access</h4>
      <p class="section-description">
          Here you'll find exploits which are designed to initiate access on a remote
          host. The goal of each exploit is to either learn information about a remote host - or deploy an
          agent on it by exploiting a known vulnerability.
      </p>
      <select id="exploits" onchange="showProperties()">
        <option disabled selected>Choose an exploit</option>
        {% for ex in exploits %}
            <option value={{ ex.identifier }}>{{ ex.name }}</option>
        {% endfor %}}
      </select>
      <br><br>
      <div>
        <table id="exploit-properties" class="obfuscation-table" border=1 frame=void rules=rows></table>
      </div>
      <br>
      <button id="exploitExploit" type="button" class="button-success atomic-button">Exploit</button>

    </div>
    <div class="column" style="flex:75%">

    </div>
  </div>
</div>

<script>
    function showProperties(){
        function propertiesCallback(data){
            $('#exploit-properties').empty();
                data[0].properties.forEach(function(prop){
                    $.each(prop, function(k, v) {
                        $('#exploit-properties').append('<tr><td style="font-size:12px;">'+k+'</td><td><input type="text" value="'+v+'" placeholder="Required value" style="text-align:left;font-size:12px"/></td></tr>');
                });
            });
        }
        let exploitID = $('#exploits option:selected').attr('value');
        restRequest('POST', {'index':'exploits', 'identifier': exploitID}, propertiesCallback);
    }
</script>